import{pluck,fcEach,extend2,POINTER,domInsertModes,hasSVG,isIE11,isIE,normalizeCSSDimension}from'../_internal/lib/lib';import{convertColor}from'../_internal/lib/lib-graphics';import{addListener,removeListener,raiseWarning,triggerEvent,raiseError,setRootSender,disposeEvents}from'../_internal/misc/event-api';import{addDep,getDep,getDepsByType}from'../_internal/dependency-manager';import{dataStore,cache,onDataUpdateSuccess,onDataUpdateCancel}from'../_internal/misc/updater';import rendererEvents from'../_internal/misc/renderer-events';import createChart,{globalStore}from'../_internal/misc/create-chart';import SmartLabelManager from'../_internal/vendors/fusioncharts-smartlabel/src/SmartlabelManager';import{priorityList}from'../_internal/schedular';import FileStore from'../_internal/misc/file-store';import globalPolicies from'../_internal/misc/global-policies';import NumberFormatter from'../_internal/components/numberformatter';import RedRaphael from'../_internal/redraphael/redraphael';import RedRaphaelSVG from'../_internal/redraphael/redraphael.svg';import JSONTranscoder from'../_internal/transcoder/json-transcoder';import RedRaphaelExtensions from'../_internal/redraphael/redraphael.ext';import BaseChart from'../viz/basechart';import ToolTipAdapter from'../_internal/misc/tooltip-adapter';const NATIVE_FORMAT='json',version='undefined'==typeof FC_VERSION?'':FC_VERSION,SCRIPT_NAME_RE=/(^|[\/\\])(fusioncharts\.js)([\?#].*)?$/gi,SIGNATURE_MATCH_RE=/^(FusionCharts|FusionWidgets|FusionMaps)/,LENGTH_CLEANUP_RE=/[^\%\d]*$/gi,URL_RE=/url$/i,MAP_NEEDED='undefined'!=typeof HAS_MAPS&&HAS_MAPS,sanitiseFormatStr=e=>e.toString().toLowerCase(),handleContainerVisibility=function(){var e,t={},a=function(){var n,i,r,s,o,d=0,l=parseInt(FusionCharts.options.visibilityTrackingInterval,10)||300;for(n in t)d+=1,i=t[n].chart,r=t[n].container,s=t[n].insertMode,o=t[n].callback,(i.disposed||!isHidden(r))&&(delete t[n],d-=1,!i.disposed&&i.renderChart(r,s,o));e=d?setTimeout(a,l):clearTimeout(e)};return function(n,i,r,s){t[n.id]={chart:n,container:i,insertMode:r,callback:s},e||(e=setTimeout(a,parseInt(FusionCharts.options.visibilityTrackingInterval,10)||300))}}(),isHidden=function(){var e=function(e,t){return window.getComputedStyle?t=window.getComputedStyle(e)[t]:e.currentStyle&&(t=e.currentStyle[t]),t},t=function(a){var n=a.parentNode;return!!n&&9!==n.nodeType&&(!('none'!==e(a,'display'))||!!n&&t(n))};return t}();let isReady,readyNotified,smartLabelManager,readyNow,count=0,registerError=!1,NFStore={},docLink='https://www.fusioncharts.com/dev/migration/deprecated-functionalities?version=3.13.0',registerErrorMessage='You are using incompatible files or deprecated "register" API of FusionCharts, please go through the docs to know more at https://www.fusioncharts.com/dev/migration/deprecated-functionalities?version=3.13.0',slHandler=function(){FusionCharts.removeEventListener('initialized',slHandler),smartLabelManager=new SmartLabelManager(document.body||document.getElementsByTagName('body')[0]),globalStore.addToEnv('smartLabel',smartLabelManager)};function uniqueId(){return`chartobject-${uniqueId.lastId+=1}`}uniqueId.lastId=0;function objToLowerCase(e){let t,a={};for(t in e)a[t.toLowerCase()]=e[t];return a}function objToHash(e){let t,a=[];for(t in e)a.push(t+'_'+e[t]);return a.sort(),a.join(',')}function deconstructPolicySet(e,t,a){var n,i;for(n in e)if(e[n]instanceof Array)t[e[n][0]]=a[n];else for(i in e[n])t[e[n][i][0]]=a[n][i]}function _getParsedArgs(e,t,a,n){return{native:a===NATIVE_FORMAT,dataFormat:a,format:NATIVE_FORMAT,data:t,dataSource:e,silent:!!n}}function getScriptBaseUri(e){var t,a,n=window.document.getElementsByTagName('script'),r=n.length;for(a=0;a<r;a+=1)if(t=n[a].getAttribute('src'),'undefined'!=typeof t&&null!==t&&null!==t.match(e))return t.replace(e,'$1')}function isDuplicateId(e,t){var a,n,r,s=document.getElementById(e),o=t.id||t.getAttribute('id');if(null===s)return!1;if(e===o)return!0;for(a=t.getElementsByTagName('*'),n=0,r=a.length;n<r;n++)if(a[n]===s)return!1;return!0}function notifyRender(e){var t=FusionCharts.items[e&&e.id];t&&(!1!==e.success||e.silent)||raiseError(FusionCharts.items[e.id],'25081850','run','::RendererManager',new Error('There was an error rendering the chart. Enable FusionCharts JS debugger for more information.')),t.ref=e.ref,triggerEvent('internal.DOMElementCreated',t,{})}function purgeDOM(e){var t,r,s,o=e.attributes;if(o)for(t=o.length-1;0<=t;t-=1)s=o[t].name,'function'==typeof e[s]&&(e[s]=null);if(o=e.childNodes,o)for(r=o.length,t=0;t<r;t+=1)purgeDOM(e.childNodes[t])}function showUnsupportedChartMessage(e,t,a){var n=e.args,i=e.options;e._chartMessageImageStyle={imageHAlign:n.typeNotSupportedMessageImageHAlign||i.baseChartMessageImageHAlign,imageVAlign:n.typeNotSupportedMessageImageVAlign||i.baseChartMessageImageVAlign,imageAlpha:n.typeNotSupportedMessageImageAlpha||i.baseChartMessageImageAlpha,imageScale:n.typeNotSupportedMessageImageScale||i.baseChartMessageImageScale},e._chartMessageStyle={color:n.typeNotSupportedMessageColor||i.baseChartMessageColor,fontFamily:n.typeNotSupportedMessageFont||i.baseChartMessageFont,fontSize:n.typeNotSupportedMessageFontSize||i.baseChartMessageFontSize},registerError&&(i.messageURL=docLink),createChart(FusionCharts,e,t,'base',a,registerError?registerErrorMessage:i.typeNotSupportedMessage)}function registerEvtHandler(){registerError=!0}class FusionCharts{constructor(...e){let t={};this.__state={},this.id='',1===e.length&&'object'==typeof e[0]&&(t=e[0]),1<e.length&&'object'==typeof e[e.length-1]&&extend2(t,e[e.length-1],!1,!0),this.id='undefined'==typeof t.id?uniqueId():t.id,this.args=t,FusionCharts.items[this.id]instanceof FusionCharts&&raiseWarning(this,'06091847','param','',new Error(`A FusionCharts object with the specified id "${this.id}" already exists.`+`Renaming it to ${this.id=uniqueId()}`)),this._parsePolicies(globalPolicies),this.attributes.id=this.id,this.resizeTo&&this.resizeTo(t.width,t.height,!0),this.chartType&&this.chartType(t.type||t.swfUrl,!0),'undefined'!=typeof __webpack_public_path__&&(__webpack_public_path__=FusionCharts.getScriptBaseURI()),triggerEvent('beforeInitialize',this,t),FusionCharts.items[this.id]=this,FusionCharts.defaultOptions=FusionCharts.options,triggerEvent('initialized',this,t),triggerEvent('resourceRequested',this,t)}static getObjectReference(e=''){return FusionCharts.items[e]&&FusionCharts.items[e].ref}static register(){triggerEvent('register',FusionCharts,arguments,void 0,function(){raiseError(this,'0604111219','run','.register()',new Error(registerErrorMessage))})}static render(e,t){return e instanceof FusionCharts?(e.render(t),e):new FusionCharts(e).render(t)}static addDep(e){return addDep.call(this,e)}static getDep(e,t){return getDep.call(this,e,t)}static addEventListener(e,t){return addListener(e,t)}static on(e,t){return FusionCharts.addEventListener(e,t)}static removeEventListener(e,t){return removeListener(e,t)}static ready(e,t=FusionCharts,a=FusionCharts){let n=()=>{e.call(a,t)};'function'==typeof e&&(isReady?setTimeout(n,0):FusionCharts.addEventListener('ready',n))}static formatNumber(e,t={},a){t=objToLowerCase(t);let n,i,r=objToHash(t);return NFStore[r]?n=NFStore[r]:NFStore[r]=n=new NumberFormatter(t,{useScaleRecursively:!0}),n.configure(t),i=n.dataLabels(e,a),i}static transcodeData(e,t,a,n){let i,r,s,o,d=getDepsByType('transcoder'),l=sanitiseFormatStr(a),c=sanitiseFormatStr(t);return c&&'function'==typeof c.toString&&l&&'function'==typeof l.toString&&'undefined'!=typeof d[l]&&'undefined'!=typeof d[c]?(s=d[c](),o=d[l](),s.toJSON&&(i=s.toJSON(e,this),r=o.fromJSON(i.data,this)),i.error instanceof Error||(r.error=i.error),n?r:r.data):void raiseError(this,'14090217','param','.transcodeData()','Unrecognized data-format specified during transcoding.')}static setAnimation(e){FusionCharts.options._globalAnimationRule||(FusionCharts.options._globalAnimationRule=[]),FusionCharts.options._globalAnimationRule.push(e)}static setEasingEffect(e,t){FusionCharts.getDep('redraphael','plugin').easing_formulas[e]=t}static getScriptBaseURI(){return FusionCharts.options.scriptBaseUri}static setScriptBaseURI(e){FusionCharts.options.scriptBaseUri=e,'undefined'!=typeof __webpack_public_path__&&(__webpack_public_path__=e)}static getChartFromId(e){return FusionCharts.items[e]}_parsePolicies(e){let t,a,n,i=this.args;for(t in e)if(globalPolicies[t]instanceof Array)a=i[e[t][0]],this[t]='undefined'==typeof a?e[t][1]:a;else for(n in'object'!=typeof this[t]&&(this[t]={}),e[t])a=i[e[t][n][0]],this[t][n]='undefined'==typeof a?e[t][n][1]:a}hasRendered(){return!!(this.jsVars.hcObj&&this.jsVars.hcObj.hasRendered)}setTransparent(e){var t;(t=this.jsVars)&&('boolean'!=typeof e&&null!==e&&(e=!0),t.transparent=null!==e&&!0===e)}addEventListener(e,t){return addListener(e,t,this)}on(e,t){return this.addEventListener(e,t)}removeEventListener(e,t){return removeListener(e,t,this)}formatNumber(e,t,a,n){let i,r,s,o,d,l,c=this,p=c.apiInstance||{},g=p.numberFormatter;switch(s=objToHash(a),a=a&&objToLowerCase(a)||{},''===s?g?d=g:(i=c.options.dataSource,r=i.chart||{},o=objToHash(r),NFStore[o]?d=NFStore[o]:NFStore[o]=d=new NumberFormatter(p,r)):(i=c.options.dataSource,r=i.chart||{},r=extend2(extend2({},r),a),o=objToHash(r),NFStore[o]?d=NFStore[o]:NFStore[o]=d=new NumberFormatter(p,r)),(t&&t.toLowerCase?t:'').toLowerCase()){case'yaxisvalues':l=d.yAxis(e,n);break;case'xaxisvalues':l=d.xAxis(e);break;case'scale':l=d.scale(e);break;default:l=d.dataLabels(e,n);}return l}clone(e,t){let a=typeof e,n={},i=extend2({},this.args,!1,!0);return deconstructPolicySet(globalPolicies,i,this),delete i.id,delete i.animate,delete i.stallLoad,n.link=i.link,i=extend2({},i,!1,!0),i.link=n.link,('object'==a?extend2(i,e,!1,!0):'boolean'==a?t=e:void 0,t?i:new FusionCharts(i))}isActive(){if(!this.ref||window.document.getElementById(this.id)!==this.ref)return!1;try{return SIGNATURE_MATCH_RE.test('FusionCharts')}catch(t){return!1}}chartType(e,t){let a,n=this,i=!0===t,r=n.options;return'string'==typeof e&&(t='object'==typeof t?t:{},a=e.replace(/[\?\#][\s\S]*$/g,''),r.chartType=a.replace(/^[\s\S]*\//gi,''),r.chartTypeSourcePath=-1===a.indexOf('/')?t.chartTypeSourcePath||FusionCharts.options.chartTypeSourcePath||'':a.replace(/[^\/]*?$/gi,''),triggerEvent('resourceRequested',n),'undefined'!=typeof t.dataSource&&null!==t.dataSource?n.setChartData(t.dataSource,t.dataFormat,t.dataConfiguration):n.isActive()&&!i&&n.render()),(r.chartType||'').toLowerCase()}setChartDataUrl(e='',t,a,n,i){let r,s,o=getDepsByType('transcoder');if(('undefined'==typeof t||null===t||'function'!=typeof t.toString)&&(t=this.options.dataFormat,raiseWarning(this,'03091609','param','FusionCharts#setChartDataUrl','Invalid Data Format. Reverting to current data format - '+t)),r=sanitiseFormatStr(t),URL_RE.test(r)||(r+='url'),s=o[r]&&o[r](),this.jsVars.stallLoad=!0,!s)return{error:new Error('Unable to fetch data.')};return s.toJSON?void s.toJSON(e,a,n,i,this):{error:new Error('Unable to fetch data.')}}setChartData(e={},t=NATIVE_FORMAT,a,n,i){let r,s,o,d=this,l=getDepsByType('transcoder'),c=sanitiseFormatStr(t),p=l[c]&&l[c](),g=d.options;return URL_RE.test(c)?void d.setChartDataUrl(e,c,a,n,i):void(s=p?p.toJSON?p.toJSON(e,d):{error:new Error('Unable to convert data.')}:{error:new Error('Unable to convert data.')},r=s.data||s,g.error=s.error,g.dataSource=r,g.dataFormat=c,o=_getParsedArgs(e,r,c,i),triggerEvent('beforeDataUpdate',d,o,void 0,onDataUpdateSuccess,onDataUpdateCancel))}getChartData(e=NATIVE_FORMAT,t,a){var n,i,r=this,s=getDepsByType('transcoder'),o=sanitiseFormatStr(e),d=s[o](),l=r.options,c=r.apiInstance,p=!a&&(n=c&&c.getCollatedData&&c.getCollatedData(l.dataSource))?n:l.dataSource;return i=d?d.fromJSON?d.fromJSON(p,r):{error:new Error('Unable to convert data.')}:{error:new Error('Data format not recognized.')},!i.error&&l.error&&(i.error=l.error),t?i:i.data}dataReady(e){return e?this.__state.dataAvailable:this.__state.dataReady}setChartAttribute(e,t){var a,n,r,s,o;if('string'==typeof e)s=arguments[0],e={},e[s]=t;else if(null===e||'object'!=typeof e)return;if(o=0,a=this.getChartData(NATIVE_FORMAT),r=a&&(a.chart||a.graph||a.map),!r)return void raiseError(this,'2105141421','run','#setChartAttribute()','Could not retrieve attribute list. Is data ready?');for(n in e){if(o+=1,null===e[n]){delete r[n.toLowerCase()];continue}r[n.toLowerCase()]=e[n]}0<o&&('undefined'==typeof r.animation&&(r.animation='0'),this.setChartData(a,NATIVE_FORMAT))}getChartAttribute(e){var t,a,n=this.getChartData(NATIVE_FORMAT),r=n&&(n.chart||n.graph||n.map);if(0===arguments.length||'undefined'==typeof e||'undefined'==typeof r)return r;if('string'==typeof e)t=r[e.toString().toLowerCase()];else if(e instanceof Array)for(t={},a=0;a<e.length;a+=1)t[e[a]]=r[e[a].toString().toLowerCase()];else raiseError(this,'25081429','param','~getChartAttribute()','Unexpected value of "attribute"');return t}render(e,t,a){if(!this.disposed){if(a?'function'!=typeof a&&(a=void 0):'function'==typeof t?(a=t,t=void 0):!t&&'function'==typeof e&&(a=e,e=void 0),'undefined'==typeof e&&(e=this.options.containerElementId||this.options.containerElement),'string'==typeof e&&(e=document.getElementById(e)),'undefined'==typeof e||null===e)return raiseError(this,'03091456','run','.render()',new Error('Unable to find the container DOM element.')),this;isHidden(e)?handleContainerVisibility(this,e,t,a):this.renderChart(e,t,a)}return this}renderChart(e,t,a){var n,i,r,o,d,l=this;if(!this.disposed){if(((r=window[this.id])&&r.FusionCharts&&r.FusionCharts===this||(r=this.ref)&&r.FusionCharts&&r.FusionCharts===this)&&(this._dispose(),r===window[this.id]&&(window[this.id]=void 0)),'undefined'!=typeof window[this.id]&&raiseError(this,'25081843','comp','.render',new Error('#25081843:IECompatibility() Chart Id is same as a JavaScript variable name. Variable naming error. Please use unique name for chart JS variable, chart-id and container id.')),a?'function'!=typeof a&&(a=void 0):'function'==typeof t?(a=t,t=void 0):!t&&'function'==typeof e&&(a=e,e=void 0),t=(t||this.options.insertMode).toLowerCase()||domInsertModes.REPLACE,'undefined'==typeof e&&(e=this.options.containerElementId||this.options.containerElement),'string'==typeof e&&(e=document.getElementById(e)),'undefined'==typeof e||null===e)return raiseError(this,'03091456','run','.render()',new Error('Unable to find the container DOM element.')),this;if(isDuplicateId(this.id,e))return raiseError(this,'05102109','run','.render()',new Error('A duplicate object already exists with the specific Id: '+this.id)),this;if(n=document.createElement(this.options.containerElementType||'span'),n.setAttribute('id',this.id),'append'!==t&&'prepend'!==t)for(;e.hasChildNodes();)e.removeChild(e.firstChild);return'prepend'===t&&e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),this.options.containerElement=e,this.options.containerElementId=e.id,(d=n.style)&&(d.position='relative',d.textAlign='left',d.lineHeight='normal',d.display='inline-block',d.zoom='1',d['vertical-align']='middle',d.fontWeight='normal',d.fontVariant='normal',d.fontStyle='normal',d.textDecoration='none',d['*DISPLAY']='inline',d.padding='0',d.margin='0',d.border='none',d.direction='ltr',(isIE||isIE11)&&hasSVG&&(d['-ms-touch-action']='none')),this.options.containerClassName&&(n.className=this.options.containerClassName),o=normalizeCSSDimension(this.width,this.height,n),this.__state.renderedWidth=o.pixelWidth,this.__state.renderedHeight=o.pixelHeight,this.__state.rendering=!0,triggerEvent('beforeRender',this,i={container:e,width:this.width,height:this.height,renderer:this.options.renderer},void 0,function(e,t){!0===this.disposed||l._render(n,function(){if(notifyRender(...arguments),a)try{a.call(e.sender,t.container)}catch(t){setTimeout(function(){throw t})}})},function(){triggerEvent('renderCancelled',l,i)}),this}}_render(e,t){var a,n,i,r=this,s=r.chartType(),o=r.__state,d=r.options,l=r.args,c=r.options.showChartLoadingMessage,p=FusionCharts.getDep('vml','dependency'),g=()=>{registerError=!1;let a=FusionCharts.getDep(s,'dependency')||FusionCharts.getDep(s,'chartapi')||FusionCharts.getDep(s,'maps');a?a.then?(FusionCharts.addEventListener('register',registerEvtHandler),a.then(e=>{e.__esModule?(FusionCharts.addDep(e['default']),h(),m()):m()})['catch'](()=>{showUnsupportedChartMessage(r,e,t)})):(h(),m()):showUnsupportedChartMessage(r,e,t)},h=()=>{let e=getDep(o.lastRenderedType,'chartapi')||getDep(o.lastRenderedType,'maps');if(e&&o.lastRenderedType!==s&&(triggerEvent('chartTypeChanged',r,{previousType:o.lastRenderedType,newType:s}),a=e,a))for(i in a)delete r[i];o.lastRenderedType=s},m=()=>{let a=FusionCharts.getDep(s,'chartapi'),n=FusionCharts.getDep(s,'maps'),i=FusionCharts.getDep('maps','chartapi');return a||n&&i?(h(),void createChart(FusionCharts,r,e,s,t)):n&&MAP_NEEDED?void import('../maps').then(a=>{FusionCharts.addDep(a['default']),h(),createChart(FusionCharts,r,e,s,t)})['catch'](()=>{showUnsupportedChartMessage(r,e,t),raiseError(FusionCharts,'12052314141','run','JavaScriptRenderer~Maps',new Error('FusionCharts\' maps file is required to render the visualization.'))}):void showUnsupportedChartMessage(r,e,t)},u=()=>{createChart(FusionCharts,r,e,'base',void 0,n)};e||(e=e||r.ref||r.jsVars.container||r.options&&r.options.containerElement&&r.options.containerElement.childNodes[0]),r.apiInstance&&r.apiInstance.removeJob('resizeScheduled'),n=c?d.PBarLoadingText||d.loadMessage:'',r._chartMessageImageStyle={imageHAlign:l.loadMessageImageHAlign||d.baseChartMessageImageHAlign,imageVAlign:l.loadMessageImageVAlign||d.baseChartMessageImageVAlign,imageAlpha:l.loadMessageImageAlpha||d.baseChartMessageImageAlpha,imageScale:l.loadMessageImageScale||d.baseChartMessageImageScale},r._chartMessageStyle={color:l.loadMessageColor||d.baseChartMessageColor,fontFamily:l.loadMessageFont||d.baseChartMessageFont,fontSize:l.loadMessageFontSize||d.baseChartMessageFontSize},p?p.then?p.then(e=>{FusionCharts.addDep(e['default']),u(),g()})['catch'](()=>{raiseError(FusionCharts,'162162788','run','>RendererError~VMLRendererLoad','Unable to load FusionCharts VML renderer.')}):(FusionCharts.addDep(p),u(),g()):(u(),g())}resizeTo(e,t,a){var n=this,i=n.width,r=n.height,s=n.__state,o=n.apiInstance&&n.apiInstance.config||{};return o.resize=!0,'object'==typeof e&&(a=t,t=e.h,e=e.w),e=null===e||'undefined'==typeof e?i:e.toString().replace(LENGTH_CLEANUP_RE,''),t=null===t||'undefined'==typeof t?r:t.toString().replace(LENGTH_CLEANUP_RE,''),!0===a?(n.width=e,n.height=t):triggerEvent('beforeresize',n,{currentWidth:i,currentHeight:r,newWidth:e,newHeight:t},void 0,function(){n.width=e,n.height=t,n.scheduleResize({width:e,height:t}),n.apiInstance.addJob(`resized${count++}`,function(){triggerEvent('resized',n,{id:n.id,width:n.width,height:n.height,prevWidth:i,prevHeight:r,pixelWidth:n.ref&&n.ref.offsetWidth||0,pixelHeight:n.ref&&n.ref.offsetHeight||0,originalWidth:s.renderedWidth,originalHeight:s.renderedHeight})},priorityList.postRender)},function(){triggerEvent('resizecancelled',n,{currentWidth:i,currentHeight:r,cancelledTargetWidth:e,cancelledTargetHeight:t})}),this}update(e){var t=this,a=t.ref,n=t.jsVars,i=n&&n.fcObj,r=n.container||i&&i.options&&i.options.containerElement&&i.options.containerElement.childNodes[0];n.hcObj&&n.hcObj.destroy&&n.hcObj.destroy(),t.options.dataSource=e.data,t.apiInstance&&t.apiInstance.removeJob('resizeScheduled'),'undefined'==typeof e.error?(delete n.stallLoad,delete n.loadError,!t.__state.firstRenderNotified&&t.jsVars.secondTimeRender&&(t.__state.firstRenderNotified=!0),this.isActive()&&(t.chartType()===t.__state.lastRenderedType?createChart(FusionCharts,t,r):t.render())):(this.isActive()&&'function'==typeof a.showChartMessage&&a.showChartMessage('InvalidXMLText'),delete n.loadError)}dispose(){var e=this,t={};triggerEvent('beforeDispose',e,t,void 0,function(){for(var a in e._dispose(),triggerEvent('disposed',e,t),disposeEvents(e),delete FusionCharts.items[e.id],e)e.hasOwnProperty(a)&&delete e[a];e.disposed=!0},function(){triggerEvent('disposeCancelled',e,t)})}_dispose(){var e,t=this,a=t.jsVars;t.apiInstance&&(t.apiInstance.removeJob('resizeScheduled'),t.apiInstance.remove({instant:!0}),delete t.apiInstance,delete a.instanceAPI),(e=t.ref)&&(purgeDOM(e),e.parentNode&&e.parentNode.removeChild(e)),a.container=null}_config(e,t){var a,n,i=this,r=i.jsVars,s=r.msgStore,o=r.cfgStore,d=i.options;for(a in n={LoadingText:'loadMessage',ChartNotSupported:'typeNotSupportedMessage',RenderChartErrorText:'renderErrorMessage',XMLLoadingText:'dataLoadStartMessage',ChartNoDataText:'dataEmptyMessage',LoadDataErrorText:'dataLoadErrorMessage',InvalidXMLText:'dataInvalidMessage'},'string'==typeof e&&1<arguments.length&&(a=e,e={},e[a]=t),e)'undefined'==typeof s[a]?o[a.toLowerCase()]=e[a]:s[a]=e[a],n[a]?d[n[a]]=e[a]:d[a]=e[a]}configure(e,t){var a;e&&('string'==typeof e?(a={},a[e]=t):a=e,this._config(a))}print(e){var t=this.apiInstance,a=extend2({},e);return!t.config.isPrinting&&t.config.hasRendered&&void triggerEvent('BeforePrint',this,a,void 0,function(){var e,n,r,s,o=t.getFromEnv('chart-container'),d=[],l=o.parentNode,c=document.body||document.getElementsByTagName('body')[0],p=c.childNodes;if(t.config.isPrinting=!0,fcEach(p,function(e,t){1===e.nodeType&&(d[t]=e.style.display,e.style.display='NONE')}),!1!==a.hideButtons){for(n=t.getChildren('chartMenuBar').config.componentGroups[0].config.symbolList,s=0,e=n.length;s<e;s++)if((r=n[s])instanceof t.getFromEnv('toolBoxAPI').SymbolWithContext){r=r.getListRefernce().getFirstContainer();break}r.config.container.style.display='NONE'}c.appendChild(o),window.print(),setTimeout(function(){r.config.container.style.display='visible',l.appendChild(o),fcEach(p,function(e,t){1===e.nodeType&&(e.style.display=d[t])}),!1!==a.hideButtons&&(r.config.container.style.display='visible'),t.config.isPrinting=!1,triggerEvent('PrintComplete',t.getFromEnv('chartInstance'),a)},1e3)},function(){triggerEvent('PrintCancelled',t.getFromEnv('chartInstance'),a)})}getSVGString(e,t){var a,n=this,i=n.apiInstance,r=i&&i.getFromEnv('paper');return t&&t.keepImages&&(a=!0),'function'==typeof e?void i.addJob('getSVG',function(){e(r&&r.toSVG&&r.toSVG(a))},priorityList.postRender):r&&r.toSVG?r.toSVG(a):'<svg></svg>'}lockResize(e){return'boolean'==typeof e?this.jsVars.resizeLocked=e:!!this.jsVars.resizeLocked}showChartMessage(e,t,a,n={}){let i=this,r=i.apiInstance,s=function(){i._showChartMessage(e,t,a,n)};return r&&('base'===r.getName()?i.addEventListener('renderComplete',s):s()),e}_showChartMessage(e,t,a,n={}){let i,r=this,s=r.jsVars,o=r.apiInstance,d=r.options,l=function(){t&&o&&o.config.hasRendered?(o._show&&o._show(),r.showMessage(e,i,a)):(o._hide&&o._hide(),o.setChartMessage(e,{_chartMessageStyle:i}),o.drawChartMessage())};return o._hideChartMessage(),'undefined'==typeof e?void r.hideChartMessage():void(i={fontFamily:pluck(n.font,d.baseChartMessageFont,'Verdana,sans'),fontSize:pluck(n.fontSize,d.baseChartMessageFontSize,10),color:pluck(n.color&&convertColor(n.color,n.alpha),d.baseChartMessageColor)},s.msgStore[e]&&(e=s.msgStore[e]),o.addJob('showMsg',l,priorityList.postRender))}_resize(){var e=this.jsVars,t=e.instanceAPI,a=e.container;t?(t.config.elScroll=!1,t.getFromEnv('animationManager').setAnimationState('resize'),t.addToEnv('chartWidth',a.offsetWidth),t.addToEnv('chartHeight',a.offsetHeight),t.asyncDraw()):createChart(FusionCharts,e.fcObj,a,e.type,void 0,void 0,!1,!0)}hideChartMessage(){var e=this,t=e.apiInstance;t._hideChartMessage(),t._show&&t._show()}showMessage(e='',t,a){var n,i,r,s=this.apiInstance,o=s.config,d=s.getFromEnv('paper'),l=s.getFromEnv('smartLabel'),c=s.getFromEnv('animationManager'),p=s.getGraphicalElement('messageText'),g=s.getGraphicalElement('messageVeil'),m=d.width,u=d.height;i=s.getChildContainer('messageGroup'),c.setAnimationState('showmessage'),n=c.setAnimation({el:i||'group',attr:{name:'messageGroup'},component:s,label:'group'}),n.show().toFront(),i||s.addChildContainer('messageGroup',n),g=c.setAnimation({el:g||'rect',attr:{x:0,y:0,width:m,height:u,fill:'rgba(0,0,0,0.2)',stroke:'none'},container:n,component:s,label:'rect'}),g.unclick(n.hide),g.show().toFront().attr('cursor',a?POINTER:'default'),a&&g.click(s._hideChartMessage,s),s.addGraphicalElement('messageVeil',g),l.setStyle(t),r=l.getSmartText(e,m-(o.marginRight||0)-(o.marginLeft||0),u-(o.marginTop||0)-(o.marginBotton||0)),p=c.setAnimation({el:p||'text',attr:{"font-size":t.fontSize,"font-family":t.fontFamily,fill:t.color,text:r.text,"line-height":14,x:m/2,y:u/2},container:n,component:s,label:'text'}),p.attr('cursor',a?POINTER:'default')[a?'click':'unclick'](s._hideChartMessage,s).show().toFront(),s.addGraphicalElement('messageText',p)}scheduleResize(e){var t,a=this,n=a.ref,i=a.apiInstance;n&&i.addJob('resizeScheduled',function(){t=normalizeCSSDimension(e.width,e.height,n),'undefined'!=typeof e.width&&(n.style.width=t.width),'undefined'!==e.height&&(n.style.height=t.height),a._resize()},priorityList.instant)}}FusionCharts.id='FusionCharts',FusionCharts.options={html5ScriptNameSuffix:'.js',html5ScriptNamePrefix:'fusioncharts.',export:{useCanvas:!1},scriptBaseUri:function(){var e=getScriptBaseUri(SCRIPT_NAME_RE);return'undefined'==typeof e?(raiseError(FusionCharts,'1603111624','run','>GenericRuntime~scriptBaseUri','Unable to locate FusionCharts script source location (URL).'),''):e}()},'undefined'!=typeof __webpack_public_path__&&(__webpack_public_path__=FusionCharts.getScriptBaseURI()),FusionCharts.version=version.split(/[\.\-]/g),FusionCharts.items={},setRootSender(FusionCharts),isReady=!0,setTimeout(()=>{let e=isReady;isReady=!0,readyNotified=!0,triggerEvent('ready',FusionCharts,{version:FusionCharts.version,now:!e}),readyNow=!e},1),FusionCharts.addEventListener('dependencyAdded',function(t,e){if('maps'===e.type){let t={};t[e.name]=['fusioncharts.maps.js'],FusionCharts.getDep('dependency')||FusionCharts.addDep({name:'dependency',extension:t})}}),FusionCharts.addEventListener('beforeInitialize',function(t){var e,a,n=t.sender,i=n.options.events;if(i)for(e in i)'function'==typeof i[e]&&n.addEventListener(e,i[e]);for(a in n.options.renderer='javascript',rendererEvents)n.addEventListener(a,rendererEvents[a])}),FusionCharts.addEventListener('beforeInitialize',function(e){var t=e.sender,a=t.options,n=t.args.dataSource,i=t.args.dataFormat;if(delete dataStore[t.id],cache[t.id]={},'undefined'!=typeof n&&null!==n){if(t.__state.dataSetDuringConstruction=!0,'string'!=typeof i)switch(typeof n){case'function':n=a.dataSource=n.call(t,a.dataConfiguration),t.args.dataFormat='JSON';break;case'string':t.args.dataFormat=/^\s*?\{[\s\S]*\}\s*?$/g.test(i)?'JSON':'XML';break;case'object':t.args.dataFormat='JSON';}i&&i.toString&&(t.__state.dataFetchDuringConstruction=URL_RE.test(i.toString())),t.setChartData(n,i,void 0,void 0,!0)}else t.__state.dataSetDuringConstruction=!1,raiseWarning(t,'1810131922A','param',':dataHandler~event:beforeInitialize','Data source was not defined during construction, hence set to blank renderer default - json'),t.setChartData('',NATIVE_FORMAT,void 0,void 0,!0),t.__state.dataAvailable=!1}),FusionCharts.addEventListener('dataUpdated',function(e,t){var a=e.sender,n=a.__state;n.rendering&&(n.dataFetchDuringConstruction||n.updatePending)&&(delete n.dataFetchDuringConstruction,delete n.updatePending,a.update(t))}),FusionCharts.addEventListener(['rendered','dataloaderror','nodatatodisplay','rendercancelled'],function(t,e){var a=t.sender;a instanceof FusionCharts&&a.__state&&a.__state.rendering&&(triggerEvent('internal.rendered',a,e),a.__state&&delete a.__state.rendering)}),isReady&&!readyNotified&&(readyNotified=!0,triggerEvent('ready',FusionCharts,{version:FusionCharts.version,now:readyNow})),FusionCharts.addEventListener('initialized',slHandler),FusionCharts.addDep(FileStore),FusionCharts.addDep(RedRaphael),FusionCharts.addDep(ToolTipAdapter),FusionCharts.addDep(RedRaphaelSVG),FusionCharts.addDep(JSONTranscoder),FusionCharts.addDep(RedRaphaelExtensions),FusionCharts.addDep(BaseChart);export default FusionCharts;